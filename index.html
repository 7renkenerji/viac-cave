<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIAC Mutant Cave</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* --- GENEL AYARLAR --- */
        * { -webkit-tap-highlight-color: transparent; user-select: none; outline: none; }
        body { background-color: #0b021a; color: #ffb300; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        .cave-container { text-align: center; border: 2px solid #5e00ff; padding: 30px; border-radius: 50px; box-shadow: 0 0 20px #5e00ff; background: rgba(20, 0, 50, 0.8); width: 85%; max-width: 400px; }

        /* --- YUMURTA TASARIMI --- */
        .yumurta { width: 150px; height: 200px; background: radial-gradient(circle at 30% 30%, #ffdf00, #ffb300, #966b00); border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; margin: 20px auto; position: relative; overflow: hidden; cursor: pointer; }
        .catlak { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.5s; pointer-events: none; }

        /* --- BEBEK MUTANT TASARIMI (Level 5+) --- */
        .bebek-mutant { 
            width: 140px; height: 180px; 
            background: radial-gradient(circle at 30% 30%, #00ffcc, #00897b); 
            border-radius: 45% 45% 50% 50%; 
            margin: 20px auto; 
            position: relative; 
            display: none; /* JavaScript ile Level 5'te "block" olacak */
            animation: nefes 2.5s infinite ease-in-out; 
            box-shadow: 0 0 25px rgba(0, 255, 204, 0.4);
            cursor: pointer;
        }

        /* Mutantın Gözleri */
        .goz { position: absolute; width: 18px; height: 24px; background: white; border-radius: 50%; top: 45px; }
        .goz.sol { left: 35px; }
        .goz.sag { right: 35px; }
        .goz::after { content: ''; position: absolute; width: 8px; height: 12px; background: black; border-radius: 50%; left: 5px; top: 6px; }

        @keyframes nefes { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.04); } }

        /* --- DİĞER ÖĞELER --- */
        .level-bar-kapsayici { width: 100%; background: #2a0a4d; border-radius: 10px; margin: 15px 0; height: 12px; border: 1px solid #5e00ff; overflow: hidden; }
        .level-bar-doluluk { width: 0%; height: 100%; background: linear-gradient(90deg, #ffb300, #ffdf00); transition: width 0.2s; }
        .level-text { color: white; font-size: 14px; }
    </style>
</head>
<body>

    <div class="cave-container">
        <h1 id="ana_baslik">VIAC MUTANT CAVE</h1>
        <p class="level-text">Level <span id="seviye_no">1</span></p>

        <div id="yumurta_kismi" onclick="tiklamaYapildi()">
            <div class="yumurta">
                <div id="c2" class="catlak" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M30 20 L35 25 L32 35 M70 15 L65 25 L75 35%22 stroke=%22black%22 stroke-width=%220.7%22 fill=%22none%22/></svg>')"></div>
                <div id="c3" class="catlak" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M10 50 L25 55 L20 65 M85 45 L70 50%22 stroke=%22black%22 stroke-width=%220.7%22 fill=%22none%22/></svg>')"></div>
                <div id="c4" class="catlak" style="background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M50 60 L45 75 L55 90%22 stroke=%22black%22 stroke-width=%220.7%22 fill=%22none%22/></svg>')"></div>
            </div>
        </div>

        <div id="mutant_kismi" onclick="tiklamaYapildi()">
            <div class="bebek-mutant" id="mutant_gorsel">
                <div class="goz sol"></div>
                <div class="goz sag"></div>
                </div>
        </div>

        <div class="level-bar-kapsayici"><div id="cubuk" class="level-bar-doluluk"></div></div>
        <p id="durum_yazisi">...</p>
        <p><span id="birim_adi">VIAC Particles</span>: <span id="bakiye">0</span></p>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let puan = 0, level = 1, ilerleme = 0;

        const diller = {
            'tr': { title: "VIAC MUTANT MAĞARASI", status: "Enerji Topla!", unit: "VIAC Parçacığı", born: "Doğdu!" },
            'en': { title: "VIAC MUTANT CAVE", status: "Collect Energy!", unit: "VIAC Particles", born: "It's Born!" },
            'es': { title: "CUEVA MUTANTE VIAC", status: "Recoge Energía!", unit: "Partículas VIAC", born: "¡Nacido!" },
            'it': { title: "CAVERNA MUTANTE VIAC", status: "Raccogli Energia!", unit: "Particelle VIAC", born: "Nato!" },
            'de': { title: "VIAC MUTANTENHÖHLE", status: "Energie Sammeln!", unit: "VIAC-Partikel", born: "Geboren!" },
            'fr': { title: "GROTTE MUTANTE VIAC", status: "Collecter l'Énergie!", unit: "Particules VIAC", born: "Né!" },
            'ru': { title: "VIAC МУТАНТНАЯ ПЕЩЕРА", status: "Собирай Энергию!", unit: "VIAC Частицы", born: "Родился!" },
            'zh': { title: "VIAC 变异洞穴", status: "收集能量!", unit: "VIAC 粒子", born: "出生了！" },
            'pt': { title: "CAVERNA MUTANTE VIAC", status: "Coletar Energia!", unit: "Partículas VIAC", born: "Nasceu!" }
        };

        const userLang = tg.initDataUnsafe.user?.language_code || 'en';
        const secilenDil = diller[userLang] ? userLang : 'en';

        document.getElementById('ana_baslik').innerText = diller[secilenDil].title;
        document.getElementById('durum_yazisi').innerText = diller[secilenDil].status;
        document.getElementById('birim_adi').innerText = diller[secilenDil].unit;

        function tiklamaYapildi() {
            puan++; ilerleme++;
            ekraniGuncelle();
            if (ilerleme >= 30) { seviyeAtla(); }
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        }

        function seviyeAtla() {
            level++; ilerleme = 0;
            if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');

            if (level <= 4) {
                if(level === 2) document.getElementById('c2').style.opacity = "1";
                if(level === 3) document.getElementById('c3').style.opacity = "1";
                if(level === 4) document.getElementById('c4').style.opacity = "1";
            } 
            else if (level === 5) {
                // YUMURTAYI GİZLE
                document.getElementById('yumurta_kismi').style.display = "none";
                // MUTANTI GÖSTER
                document.getElementById('mutant_gorsel').style.display = "block";
                document.getElementById('durum_yazisi').innerText = diller[secilenDil].born;
            }
            ekraniGuncelle();
        }

        function ekraniGuncelle() {
            document.getElementById('bakiye').innerText = puan;
            document.getElementById('seviye_no').innerText = level;
            document.getElementById('cubuk').style.width = (ilerleme / 30) * 100 + "%";
        }
    </script>
</body>
</html>
